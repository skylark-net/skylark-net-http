{"version":3,"sources":["restful.js"],"names":["define","objects","strings","Evented","Xhr","mixin","substitute","inherit","klassName","idAttribute","getBaseUrl","args","baseEndpoint","this","baseUrl","server","basePath","undefined","_head","_get","get","_post","verb","url","post","_put","put","_delete","del","_patch","patch","query","params","retrieve","create","update","delete","init"],"mappings":";;;;;;;AAAAA,OAAO,CACH,wBACA,wBACA,gCACA,SACF,SAASC,EAAQC,EAAQC,EAAQC,GAC/B,IAAIC,EAAQJ,EAAQI,MAChBC,EAAaJ,EAAQI,WAyHzB,OAvHcH,EAAQI,QAAQ,CAC1BC,UAAc,UAEdC,YAAe,KAEfC,WAAa,SAASC,GAElB,IAAIC,EAAeN,EAAWO,KAAKD,aAAaD,CAAI,EAChDG,EAAUD,KAAKE,OAASF,KAAKG,SAAWJ,EAI5C,OAFIE,EADyBG,KAAAA,IAAzBN,EAAKE,KAAKJ,aACAK,EAAU,IAAMH,EAAKE,KAAKJ,aAEjCK,CACX,EACAI,MAAQ,SAASP,KAQjBQ,KAAO,SAASR,GAOZ,OAAOP,EAAIgB,IAAIP,KAAKH,WAAWC,CAAI,EAAEA,CAAI,CAC7C,EACAU,MAAS,SAASV,EAAKW,GASnB,IAAIC,EAAMV,KAAKH,WAAWC,CAAI,EAI9B,OAAOP,EAAIoB,KAFPD,EADAD,EACMC,EAAM,IAAMD,EAENC,EAAKZ,CAAI,CAC7B,EAEAc,KAAQ,SAASd,EAAKW,GASlB,IAAIC,EAAMV,KAAKH,WAAWC,CAAI,EAI9B,OAAOP,EAAIsB,IAFPH,EADAD,EACMC,EAAM,IAAMD,EAEPC,EAAKZ,CAAI,CAC5B,EAEAgB,QAAU,SAAShB,GASXY,EAAMV,KAAKH,WAAWC,CAAI,EAC9B,OAAOP,EAAIwB,IAAIL,CAAG,CACtB,EAEAM,OAAS,SAASlB,GAQd,IAAIY,EAAMV,KAAKH,WAAWC,CAAI,EAC9B,OAAOP,EAAI0B,MAAMP,EAAKZ,CAAI,CAC9B,EACAoB,MAAO,SAASC,GAEZ,OAAOnB,KAAKQ,MAAMW,CAAM,CAC5B,EAEAC,SAAU,SAASD,GACf,OAAOnB,KAAKM,KAAKa,CAAM,CAC3B,EAEAE,OAAQ,SAASF,GACb,OAAOnB,KAAKQ,MAAMW,CAAM,CAC5B,EAEAG,OAAQ,SAASH,GACb,OAAOnB,KAAKY,KAAKO,CAAM,CAC3B,EAEAI,OAAQ,SAASJ,GAEb,OAAOnB,KAAKc,QAAQK,CAAM,CAC9B,EAEAF,MAAO,SAASE,GAEZ,OAAOnB,KAAKgB,OAAOG,CAAM,CAC7B,EACAK,KAAM,SAASL,GACX3B,EAAMQ,KAAKmB,CAAM,CAEtB,CACH,CAAC,CAGL,CAAC","file":"../restful.js","sourcesContent":["define([\r\n    \"skylark-langx-objects\",\r\n    \"skylark-langx-strings\",\r\n    \"skylark-langx-emitter/evented\",    \r\n    \"./xhr\"\r\n],function(objects,strings,Evented,Xhr){\r\n    var mixin = objects.mixin,\r\n        substitute = strings.substitute;\r\n\r\n    var Restful = Evented.inherit({\r\n        \"klassName\" : \"Restful\",\r\n\r\n        \"idAttribute\": \"id\",\r\n        \r\n        getBaseUrl : function(args) {\r\n            //$$baseEndpoint : \"/files/${fileId}/comments\",\r\n            var baseEndpoint = substitute(this.baseEndpoint,args),\r\n                baseUrl = this.server + this.basePath + baseEndpoint;\r\n            if (args[this.idAttribute]!==undefined) {\r\n                baseUrl = baseUrl + \"/\" + args[this.idAttribute]; \r\n            }\r\n            return baseUrl;\r\n        },\r\n        _head : function(args) {\r\n            //get resource metadata .\r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n        },\r\n        _get : function(args) {\r\n            //get resource ,one or list .\r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, null if list\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n            return Xhr.get(this.getBaseUrl(args),args);\r\n        },\r\n        _post  : function(args,verb) {\r\n            //create or move resource .\r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"data\" : body // the own data,required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n            //verb : the verb ,ex: copy,touch,trash,untrash,watch\r\n            var url = this.getBaseUrl(args);\r\n            if (verb) {\r\n                url = url + \"/\" + verb;\r\n            }\r\n            return Xhr.post(url, args);\r\n        },\r\n\r\n        _put  : function(args,verb) {\r\n            //update resource .\r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"data\" : body // the own data,required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n            //verb : the verb ,ex: copy,touch,trash,untrash,watch\r\n            var url = this.getBaseUrl(args);\r\n            if (verb) {\r\n                url = url + \"/\" + verb;\r\n            }\r\n            return Xhr.put(url, args);\r\n        },\r\n\r\n        _delete : function(args) {\r\n            //delete resource . \r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}         \r\n\r\n            // HTTP request : DELETE http://center.utilhub.com/registry/v1/apps/{appid}\r\n            var url = this.getBaseUrl(args);\r\n            return Xhr.del(url);\r\n        },\r\n\r\n        _patch : function(args){\r\n            //update resource metadata. \r\n            //args : id and other info for the resource ,ex\r\n            //{\r\n            //  \"id\" : 234,  // the own id, required\r\n            //  \"data\" : body // the own data,required\r\n            //  \"fileId\"   : 2 // the parent resource id, option by resource\r\n            //}\r\n            var url = this.getBaseUrl(args);\r\n            return Xhr.patch(url, args);\r\n        },\r\n        query: function(params) {\r\n            \r\n            return this._post(params);\r\n        },\r\n\r\n        retrieve: function(params) {\r\n            return this._get(params);\r\n        },\r\n\r\n        create: function(params) {\r\n            return this._post(params);\r\n        },\r\n\r\n        update: function(params) {\r\n            return this._put(params);\r\n        },\r\n\r\n        delete: function(params) {\r\n            // HTTP request : DELETE http://center.utilhub.com/registry/v1/apps/{appid}\r\n            return this._delete(params);\r\n        },\r\n\r\n        patch: function(params) {\r\n           // HTTP request : PATCH http://center.utilhub.com/registry/v1/apps/{appid}\r\n            return this._patch(params);\r\n        },\r\n        init: function(params) {\r\n            mixin(this,params);\r\n //           this._xhr = XHRx();\r\n       }\r\n    });\r\n\r\n    return Restful;\r\n})"]}